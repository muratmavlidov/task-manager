(this.webpackJsonptodo=this.webpackJsonptodo||[]).push([[0],{33:function(e,t,a){e.exports=a(69)},35:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},57:function(e,t,a){},58:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){},69:function(e,t,a){"use strict";a.r(t);var n=a(5),c=a(6),i=a(9),s=a(8),r=a(10),l=a(0),o=a.n(l),u=a(16),d=(a(35),a(36),function(e){var t=e.text,a=e.type;return o.a.createElement("button",{className:"btn btn-".concat(a)},t)}),m=function(e){var t=e.showAddPopup;return o.a.createElement("div",{className:"header"},o.a.createElement("div",{className:"header__title"},o.a.createElement("h1",null,"\u0421\u043f\u0438\u0441\u043e\u043a \u0437\u0430\u0434\u0430\u0447")),o.a.createElement("div",{onClick:t},o.a.createElement(d,{text:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c",type:"success"})))},p=(a(37),a(38),function(e){var t=e.id,a=e.title,n=e.deleteTask,c=e.goToEditPage;return o.a.createElement("li",{className:"task-list-item"},o.a.createElement("div",{className:"task-list-item__id"},t),o.a.createElement("div",{className:"task-list-item__title"},a),o.a.createElement("div",{className:"task-list-item__icons"},o.a.createElement("i",{className:"fa fa-pencil",onClick:c}),o.a.createElement("i",{className:"fa fa-trash",onClick:n})))}),f=function(e){var t=e.taskList,a=e.deleteTask,n=e.goToEditPage;return o.a.createElement("ul",{className:"task-list"},t.map((function(e){var t=e.id,c=e.title;return o.a.createElement(p,{key:t,id:t,title:c,deleteTask:function(){return a(t)},goToEditPage:function(){return n(t)}})})))},h=(a(39),function(e){function t(){var e,a;Object(n.a)(this,t);for(var c=arguments.length,r=new Array(c),l=0;l<c;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={fieldValue:"",errorMessage:!1},a.changeField=function(e){var t=e.target;a.setState({fieldValue:t.value,errorMessage:!1})},a.createNewTask=function(){""!==a.state.fieldValue?(a.props.closePopup(),a.props.createTask(a.state.fieldValue)):a.setState({errorMessage:!0})},a}return Object(r.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.show,a=e.closePopup,n=t?"overlay--active":"",c=this.state.errorMessage?"add-popup__formError--active":"";return o.a.createElement("div",{className:"overlay ".concat(n)},o.a.createElement("div",{className:"add-popup"},o.a.createElement("div",{className:"form"},o.a.createElement("label",{className:"form-label"},"\u041a\u0440\u0430\u0442\u043a\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"),o.a.createElement("input",{className:"form-field",onInput:this.changeField}),o.a.createElement("span",{className:"add-popup__formError ".concat(c)},"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c")),o.a.createElement("div",{className:"add-popup__btn",onClick:this.createNewTask},o.a.createElement(d,{text:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",type:"success"})),o.a.createElement("div",{className:"add-popup__close",onClick:a},"\xd7")))}}]),t}(l.Component)),v=a(15),k=a.n(v),E="https://test.megapolis-it.ru/api/list",g=function(){function e(){Object(n.a)(this,e)}return Object(c.a)(e,null,[{key:"getAllTask",value:function(){return k.a.get(E)}},{key:"createTask",value:function(e){return k.a.post(E,{title:e})}},{key:"editTask",value:function(e){var t=e.id,a=e.title;return k.a.post("".concat(E,"/").concat(t),{title:a})}},{key:"deleteTask",value:function(e){return k.a.delete("".concat(E,"/").concat(e))}}]),e}(),b=a(11),y=(a(57),function(){return o.a.createElement("div",{className:"lds-css"},o.a.createElement("div",{className:"lds-double-ring"},o.a.createElement("div",null),o.a.createElement("div",null)))}),N=(a(58),function(e){function t(){var e,a;Object(n.a)(this,t);for(var c=arguments.length,r=new Array(c),l=0;l<c;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={showAddPopup:!1,taskList:[],showSpinner:!0},a.toggleAddPopup=function(){a.setState((function(e){return{showAddPopup:!e.showAddPopup}}))},a.createTask=function(e){g.createTask(e).then((function(t){var n={id:t.data.id,title:e},c=[].concat(Object(u.a)(a.state.taskList),[n]);a.setState({taskList:c})}))},a.deleteTask=function(e){g.deleteTask(e).then((function(){a.setState((function(t){var a=t.taskList,n=a.findIndex((function(t){return t.id===e}));return{taskList:[].concat(Object(u.a)(a.slice(0,n)),Object(u.a)(a.slice(n+1)))}}))}))},a}return Object(r.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;g.getAllTask().then((function(t){e.setState({taskList:t.data.data,showSpinner:!1})}))}},{key:"render",value:function(){var e=this.state,t=e.showAddPopup,a=e.taskList,n=e.showSpinner,c=this.props.history,i=n?o.a.createElement("div",{className:"items-page__spinner"},o.a.createElement(y,null)):o.a.createElement(f,{taskList:a,deleteTask:this.deleteTask,goToEditPage:function(e){c.push("/items/".concat(e))}});return o.a.createElement("div",null,o.a.createElement(m,{showAddPopup:this.toggleAddPopup}),i,o.a.createElement(h,{show:t,closePopup:this.toggleAddPopup,createTask:this.createTask}))}}]),t}(l.Component)),T=Object(b.e)(N),j=(a(64),a(14)),O=function(e){function t(){var e,a;Object(n.a)(this,t);for(var c=arguments.length,r=new Array(c),l=0;l<c;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={id:null,title:"",fieldValue:"",changed:!1},a.changeValue=function(e){var t=e.target;a.setState({changed:a.state.title!==t.value,fieldValue:t.value})},a.editTask=function(){var e=a.state,t=e.id,n=e.fieldValue;g.editTask({id:t,title:n}).then((function(){a.props.history.push("/items")}))},a.deleteTask=function(){g.deleteTask(a.state.id).then((function(){a.props.history.push("/items")}))},a}return Object(r.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.itemId;g.getAllTask().then((function(a){var n=a.data.data,c=n.findIndex((function(e){return e.id==t}));e.setState({id:n[c].id,title:n[c].title})}))}},{key:"render",value:function(){var e=this.state,t=e.id,a=e.title,n=e.changed?o.a.createElement("div",{onClick:this.editTask,Link:!0},o.a.createElement(d,{text:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",type:"info"})):o.a.createElement(j.b,{to:"/items"},o.a.createElement(d,{text:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u0432 \u0441\u043f\u0438\u0441\u043e\u043a",type:"info"}));return o.a.createElement("div",{className:"edit-page"},o.a.createElement("div",{className:"edit-page__header"},o.a.createElement("h1",null,"\u0417\u0430\u0434\u0430\u0447\u0430 \u2116",t),o.a.createElement("div",{className:"edit-page__del",onClick:this.deleteTask},o.a.createElement(d,{text:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",type:"danger"}))),o.a.createElement("div",{className:"form"},o.a.createElement("label",{className:"form-label"},"\u041a\u0440\u0430\u0442\u043a\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"),o.a.createElement("input",{className:"form-field",defaultValue:a,onInput:this.changeValue})),n)}}]),t}(l.Component),_=Object(b.e)(O),w=(a(65),function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(r.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"app"},o.a.createElement(j.a,null,o.a.createElement(b.a,{path:"/items",exact:!0,component:T}),o.a.createElement(b.a,{path:"/items/:id",render:function(e){var t=e.match.params.id;return o.a.createElement(_,{itemId:t})}})))}}]),t}(l.Component)),P=a(32);a.n(P).a.render(o.a.createElement(w,null),document.querySelector("#root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.17e83dfe.chunk.js.map